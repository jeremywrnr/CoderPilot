<!--git controls and api stuff here-->

<template name='git'>
  <div class='col-xs-8 full-height'>
    <h2> version control </h2>
    {{> commitPanel }}
    {{> history }}
  </div>
</template>

<template name='commitPanel'>
  <div class='panel panel-primary'>
    <div class='panel-heading'><h3 class='panel-title'> github integration </h3></div>
    <div class='panel-body'>
      {{#if committing}}

      <div class='alert alert-success'>
        <div class='input-group'>
          <form class='committer'>
            <input placeholder='enter a commit message...'
            id='commitMsg' class='form-control' type='text' name='title' value=''>
          </form>
          <span class='input-group-btn'>
            <button type='button' class='btn btn-default del cancelCommit'>cancel</button>
          </span>
        </div>
      </div>

      <a target='_blank' href='https://octodex.github.com/'>
        <img class='center' style='width:100%;' src='https://octodex.github.com/images/nyantocat.gif'/>
        <!--<img class='center' style='width:40%;' src='http://random-octocat.herokuapp.com'/>-->
      </a>

      {{else}}
      <button class='btn grn newcommit'>new commit</button>
      <button class='btn grn refresh'>refresh</button>
      <button class='btn edit loadhead'>load HEAD</button>
      <button class='btn del resetfiles'>reset files</button>
      {{/if}}
    </div>
  </div>
</template>

<template name='history'>
  <div class='panel panel-primary'>
    <div class='panel-heading'><h3 class='panel-title'> history </h3></div>
    <div class='panel-body'>
      <div class='list-group'>
        {{#each commits}}
        {{> commit}}
        {{/each}}
      </div>
    </div>
  </div>
</template>

<template name='commit'>
  {{#if current}}
  <button class='list-group-item commit' id='{{#if current}}active-commit{{/if}}' href='#'>
    {{ commit.commit.message }}
    <span class='pull-right label {{#if mine}}label-primary{{else}}label-info{{/if}}'>
      {{ commit.author.login }}
    </span>
  </button>
  <button class='list-group-item' href='#'>
    <a class='btn grn' target="_blank" href='{{ this.commit.html_url }}'> view commit </a>
    <button class='btn edit loadcommit'>load commit</button>
  </button>
  {{else}}
  <button class='list-group-item commit' href='#'>
    {{ commit.commit.message }}
    <span class='pull-right label {{#if mine}}label-primary{{else}}label-info{{/if}}'>
      {{ commit.author.login }}
    </span>
  </button>
  {{/if}}
</template>
