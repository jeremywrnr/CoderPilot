<head>
  <title>code pilot</title>
  <script src='/codepilot.js'></script>
  <script src='/linkify.min.js'></script><!-- library to linkify tasks -->
  <script src='/linkify-jquery.min.js'></script>
  <script src='/linkify-string.min.js'></script>
  <script src='/packages/mizzao_sharejs-ace/ace-builds/src/ext-modelist.js'></script>
  <script src='/packages/mizzao_sharejs-ace/ace-builds/src/ext-beautify.js'></script>
  <script src='/packages/mizzao_sharejs-ace/ace-builds/src/ext-language_tools.js'></script>
</head>

<template name='main'>
  <div class='container full-height'>
    <div class='col-xs-4 full-height'>
      <div class='sidebar'>
        <h1><a href='/'> code pilot </a></h1>

        {{> loginGithub }}

        {{#if currentUser }}
        {{> navigation }}
        {{> filelist }}
        {{> chat }}
        {{/if}}
      </div>
    </div>

    {{> yield}}

  </div>
</template>

<!--login templates-->

<template name='loginGithub'>
  <div class='btn-group btn-group-justified' role='group'>
    <div class='btn-group' role='group'>
      {{#if currentUser }}
      {{> userLoggedin }}
      {{else}}
      {{> userLoggedout }}
      {{/if}}
    </div>
  </div>
</template>

<template name='userLoggedin'>
  {{#if loggingIn }}
  <button type='button' class='btn btn-default'>logging in...</button>
  {{else}}
  <button class='btn btn-default logout' type='button'>
    {{ currentUser.profile.login }} | logout
  </button>
  {{/if}}
</template>

<template name='userLoggedout'>
  <button type='button' class='btn btn-default login'>login with Github</button>
</template>

<!-- navigation icons from http://glyphicons.com/ -->

<template name='navigation'>
  <div class='btn-group btn-group-justified' role='toolbar'>

    {{#each navItems}}
    <a role='button' class='btn btn-primary btn-nav' href='{{ iconpath }}'>
      <span class='glyphicon glyphicon-{{iconname}}' aria-label='{{iconname}}'>
      </span>
    </a>
    {{/each}}

  </div>
</template>
