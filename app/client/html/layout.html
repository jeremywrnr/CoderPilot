<head>
  <title>code pilot</title>
  <link rel="icon" sizes="16x16 32x32" href="/favicon.ico?v=2">
  <script src='/codepilot.js'></script>
  <script src='/linkify.min.js'></script><!-- library to linkify tasks -->
  <script src='/linkify-jquery.min.js'></script>
  <script src='/linkify-string.min.js'></script>
  <script src='/packages/mizzao_sharejs-ace/ace-builds/src/ext-modelist.js'></script>
  <script src='/packages/mizzao_sharejs-ace/ace-builds/src/ext-beautify.js'></script>
  <script src='/packages/mizzao_sharejs-ace/ace-builds/src/ext-language_tools.js'></script>
</head>



<template name='main'>

  {{> topnav }}

  <div class='mainbody container full-height'>
    <div class='col-xs-4 full-height'>
      <div class='sidebar'>
        {{#if currentUser }}
        {{> filelist }}
        {{> chat }}
        {{/if}}
      </div>
    </div>

    {{> yield}}

  </div>
</template>

<!-- if not main, dump contents to null -->

<template name='null'>
  {{> yield }}
</template>



<!--top navbar-->

<template name='topnav'>
  <nav class='navbar navbar-inverse navbar-fixed-top'>
    <div class='containter-fluid'>

      <div class='navbar-header'>
        <a class='navbar-brand' href='/'>
          <span class='glyphicon glyphicon-pencil'></span> code pilot
        </a>
      </div>

      {{> navigation }}

      <!-- navbar right section -->
      <ul class='nav navbar-nav navbar-right nomargin'>
        {{> loginGithub }}
      </ul>

    </div>
  </nav>
</template>



<!--login templates-->

<template name='loginGithub'>
  {{#if currentUser }}
  {{> userLoggedin }}
  {{else}}
  {{> userLoggedout }}
  {{/if}}
</template>

<template name='userLoggedin'>
  {{#if loggingIn }}
  <li><a href='#'>logging in...</a></li>
  {{else}}
  <li class='del logout'>
    <a href='#'> {{ currentUser.profile.login }} | logout </a>
  </li>
  {{/if}}
</template>

<template name='userLoggedout'>
  <li class='grn login'><a href='#'> login with 
      <img style='height: 20px;' alt='github' src='/github.png'>
    </a></li>
</template>



<!-- navigation icons from http://glyphicons.com/ -->

<template name='navigation'> <!-- adding the active class would be good -->
  {{#if currentUser }}
  <ul class='nav navbar-nav navbar-just'>

    {{#each navItems}}
    <li class='navitem'>
      <a href='{{ iconpath }}'>
        <span class='glyphicon glyphicon-{{iconname}}'></span>
        {{ name }} </a>
    </li>
    {{/each}}

  </ul>
  {{/if}}
</template>
