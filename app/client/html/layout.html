<head>
  <title>code pilot</title>
  <script src='/codepilot.js'></script>
  <script src='/linkify.min.js'></script><!-- library to linkify tasks -->
  <script src='/linkify-jquery.min.js'></script>
  <script src='/linkify-string.min.js'></script>
  <script src='/packages/mizzao_sharejs-ace/ace-builds/src/ext-modelist.js'></script>
  <script src='/packages/mizzao_sharejs-ace/ace-builds/src/ext-beautify.js'></script>
  <script src='/packages/mizzao_sharejs-ace/ace-builds/src/ext-language_tools.js'></script>
</head>

<template name='main'>

  <nav class='navbar navbar-default navbar-fixed-top'>
    <div class='container-fluid'>

      <div class='navbar-header'>
        <a class='navbar-brand' style='color: #337ab7;' href='/'> code pilot </a>
      </div>

      {{> navigation }}

      <!-- navbar right section -->
      <ul class='nav navbar-nav navbar-right'>
        {{> loginGithub }}
      </ul>

    </div><!-- /.container-fluid -->
  </nav>

  <div class='container full-height'>
    <div class='col-xs-4 full-height'>
      <div class='sidebar'>


        {{#if currentUser }}
        {{> filelist }}
        {{> chat }}
        {{/if}}
      </div>
    </div>

    {{> yield}}

  </div>
</template>

<!--login templates-->

<template name='loginGithub'>
  {{#if currentUser }}
  {{> userLoggedin }}
  {{else}}
  {{> userLoggedout }}
  {{/if}}
</template>

<template name='userLoggedin'>
  {{#if loggingIn }}
  <li><a href='#'>logging in...</a></li>
  {{else}}
  <li class='active logout'>
    <a href='#'> {{ currentUser.profile.login }} | logout </a>
  </li>
  {{/if}}
</template>

<template name='userLoggedout'>
  <li class='active login'> <a href='#'> login with GitHub </a> </li>
</template>

<!-- navigation icons from http://glyphicons.com/ -->

<template name='navigation'> <!-- adding the active class would be good -->
  {{#if currentUser }}
  <ul class='nav navbar-nav'>

    {{#each navItems}}
    <li>
      <a href='{{ iconpath }}'>
        <span class='glyphicon glyphicon-{{iconname}}' aria-label='{{iconname}}'></span>
      </a>
    </li>
    {{/each}}

  </ul>
  {{/if}}
</template>
