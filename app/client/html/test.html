<!-- testing tasks -->

<template name='test'>
  <div class='col-xs-8 full-height'>
    {{#if isPilot}}<!-- pilot layout -->
    {{> tasks }}
    {{> issues}}
    {{> tester}}
    {{else}}      <!-- copilot layout -->
    {{> tester}}
    {{> issues}}
    {{> tasks }}
    {{/if}}
  </div>
</template>

<template name='tasks'>
  <div class='panel panel-default'>
    <div class='panel-heading'>
      <h3 class='panel-title'> tasks ({{taskCount}})
        <label class='label pull-right'> hide done
          <input type='checkbox' checked='{{hideCompleted}}' class='hide-completed'/>
        </label>
      </h3>
    </div>
    <div class='panel-body'>
      <form class='new-task'>
        <input id='task-name' type='text' class='form-control' placeholder='add a task...' />
      </form>
      <ul class='list-group'>
        {{#each tasks}}
        {{> task}}
        {{/each}}
      </ul>
    </div>
  </div>
</template>

<!-- todo task integration -->

<template name='task'>
  <li id='{{#if current }}active-task{{/if}}' class='list-group-item task {{#if checked}}checked disabled{{/if}}'>
    <label class='pull-right btn label {{#if mine}}label-primary{{else}}label-info{{/if}}'>{{username}}</label>
    {{{linkd}}}
  </li>

  {{#if current}}
  <li class='list-group-item'>
    <div class='btn-group btn-group-justified'>
      <div class="btn-group" role="group">
        <button class='btn grn toggle-checked'>
          {{#if checked}} bring task back
          {{else}} mark complete
          {{/if}}
        </button>
      </div>
      <div class="btn-group" role="group">
        <button class='btn del'>delete</button>
      </div>
    </div>
  </li>
  {{/if}}

</template>



<!-- github issue integration -->

<template name='issues'>
  <div class='panel panel-default'>
    <div class='panel-heading'>
      <h3 class='panel-title'> issues ({{issueCount}})
        <button class='btn btn-xs grn btn-default pull-right reload'>reload issues</button>
      </h3>
    </div>
    <div class='panel-body'>
      <ul class='list-group'>
        {{#each issues }}
        {{> issue }}
        {{/each}}
      </ul>
    </div>
  </div>
</template>

<template name='issue'>

  <button class='list-group-item issue' id='{{#if current }}active-issue{{/if}}'>
    {{ issue.title }}
    {{#each labels }}
    {{> issueLabel }}
    {{/each}}
  </button>

  {{#if current}}
  <button class='list-group-item' href='#'>
    <div class='btn-group btn-group-justified'>
      <a role='button' target='_blank' class='btn btn-default grn' href='{{ issue.html_url }}'>
        view on github </a>
      <a role='button' class='btn btn-default del closeissue' href='#'>
        close issue </a>
    </div>
    <a target='_blank' href='/screenshot/{{ feedback.imglink }}'>
      <img style='width: 100%;' src="{{ feedback.img }}" />
    </a>
  </button>
  {{/if}}

</template>

<template name='issueLabel'><!-- perhaps do dynamic coloring... -->
  <span class='pull-right label label-default' style='background: #{{color}};'> {{ name }} </span>
</template>
