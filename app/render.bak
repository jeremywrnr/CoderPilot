<!-- templates for rendering iframe locally  -->

<template name='null'>
  {{> yield }}
</template>

<!-- actual content -->

<template name='renderPanel'>
</template>

<template name='renderer'>
  {{> renderPanel }}
  <iframe srcdoc='
    <head> {{ getHead }}

    <style> {{ getCSS }} </style>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="/feedback.min.js"></script>
    <script src="/buttons.min.js"></script>
    <link rel="stylesheet" href="/feedback.min.css"/>
    <link rel="stylesheet" href="/buttons.min.css"/>

    <script type="text/javascript">
    // waiting until the page loads
    $(document).ready(function () {

    // feedback div, for use in testing with feedback.js
    $.feedback({
    ajaxURL: "/feedback",
    html2canvasURL: "/html2canvas.min.js",
    feedbackButton: ".issue",
    });

    // overwrite console.log for iframe to append to output div
    console.log = function (msg) {
    if (typeof msg === "object") $("#log")[0].innerHTML +=
    (JSON && JSON.stringify ? JSON.stringify(msg) : msg) + "\n";
    else $("#log")[0].innerHTML += msg + "\n"; }

    {{ getJS }} // insert the users javascript
    });
    </script>

    </head>
    <body> {{ getBody }}
  <div class="btn-group btn-group-justified">
    <div class="btn-group"><button type="button" class="btn grn reload btn-default">reload tester</button></div>
    <div class="btn-group"><button type="button" class="btn del issue btn-default">report issue</button></div>
  </div>

      <div> console output: <pre id="log"></pre> </div>

    </body>'
                                 style='min-height:300px;height:100%;width:100%'
                                 frameborder='0' height='100%' width='100%'>
  </iframe>
</template>
