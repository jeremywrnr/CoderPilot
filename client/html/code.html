<!-- code editor layout -->

<template name='code'>
  {{#if nulldoc}}
  {{> loadprompt}}
  {{else}}
  {{> editor }}
  {{/if}}
</template>

<template name='editor'>
  <div class='col-xs-8 editor-container full-height'>
    {{#with docid}}
    {{> filename this}}

    {{#if isImage }}
    {{> renderImage this}}

    {{else}}
    {{> sharejsAce docid=this onRender=config onConnect=setMode id='editor'}}

    {{/if}}
    {{/with}}
  </div>
</template>

<template name='loadprompt'>
  <div class='col-xs-8 full-height'>
    <div class='panel panel-primary'>
      <div class='panel-heading'>
        <h3 class='panel-title'>code editor</h3>
      </div>
      <div class='panel-body'>
        <div class="alert alert-info" role="alert">
          let's get started - click a file to start editing code!
        </div>
        <div class="panel panel-default">
          <div class="panel-body">
            <ul class='nav nav-pills nav-stacked'>
              {{> userfiles}} <!--found in file.html-->
            </ul>
          </div>
        </div>
        <img class='wide' src='img/start.gif'/>
      </div>
    </div>
  </div>
</template>

<template name='filename'>
  <div class='navbar navbar-code'>
    <div class='container-fluid'>

      {{#if rename}}
      <form class='navbar-form pull-left rename'>
        <input id='filetitle' class='form-control' type='text' name='title' value='{{title}}'>
      </form>
      {{else}}
      <strong>
        <p class='navbar-text'> ~/{{title}} </p>
      </strong>
      {{/if}}

      <form class='navbar-form pull-right'>
        <button class='edit btn btn-small'>rename</button>
        <button class='del btn btn-small'>delete</button>
      </form>


    </div>
  </div>
</template>

<template name='renderImage'>
  <div class='panel panel-default nomargin-image'>
    <div class='panel-body'>
      <a target='_blank' href='{{ html }}'>
        <img class='wide' src='{{ raw }}'/>
      </a>
    </div>
  </div>
</template>
