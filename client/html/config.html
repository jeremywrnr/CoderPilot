<!--allow user to configure things-->

<template name='config'>
  <div class='col-xs-8 full-height'>
    <div class='panel panel-default'>
      <div class='panel-heading'> <h2 class='panel-title'> account </h2> </div>
      <div class='panel-body'>

        <div class='panel panel-default'>
          <div class='panel-body'>
            <h4><img class='img-rounded' style='height: 75px;' src='{{currentUser.profile.avatar_url}}'>
              {{currentUser.profile.name}}</h4>
          </div>
          <ul class='list-group nomargin'>

            <li class='list-group-item'>
              {{#if userShowing}}
              <button class='btn btn-xs del pull-right unfocus'> hide </button>
              {{else}}
              <button class='btn btn-xs grn pull-right showUsers'> users</button>
              {{/if}}
              project id: {{ currentUser.profile.repo }}
            </li>

            {{#if userShowing}}
            {{#each users}}
            {{> user}}
            {{/each}}
            {{/if}}

            <li class='list-group-item'>
              <button class='loadGHData grn btn btn-xs pull-right'>refresh</button>
              github:
              <a href='{{currentUser.profile.html_url}}' target='_blank'>
                {{ currentUser.profile.login }}</a>
            </li>

            <li class='list-group-item'>
              {{#if repoSelecting}}
              <button class='btn btn-xs del pull-right unfocus'> cancel </button>
              {{else}}
              <button class='btn btn-xs grn pull-right repoSelect'> choose </button>
              {{/if}}
              repo:
              <a href='https://github.com/{{ currentUser.profile.repoOwner }}/{{ currentUser.profile.repoName }}'
                target='_blank'>{{ currentUser.profile.repoOwner }}/{{ currentUser.profile.repoName }}</a>
            </li>

            {{#if repoSelecting}}
            {{> forkRepo }}
            {{#each repos}}
            {{> repo}}
            {{/each}}
            {{/if}}

            <li class='list-group-item'>
              {{#if branchSelecting}}
              <button class='btn btn-xs del pull-right unfocus'> cancel </button>
              {{else}}
              <button class='btn btn-xs grn pull-right branchSelect'> choose </button>
              {{/if}}
              branch:
              <a href='https://github.com/{{ currentUser.profile.repoOwner }}/{{ currentUser.profile.repoName }}/tree/{{ currentUser.profile.repoBranch }}'
                target='_blank'>{{ currentUser.profile.repoBranch }}</a>
            </li>

            {{#if branchSelecting}}
            {{> newBranch }}
            {{#each branches}}
            {{> branch}}
            {{/each}}
            {{/if}}

            <li class='list-group-item'>
              <div class='btn-group pull-right'>
                <button class='makePilot btn-xs grn btn'>pilot</button>
                <button class='makeCopilot btn-xs grn btn'>co-pilot</button>
              </div>
              role: {{currentUser.profile.role}}
            </li>

          </ul>
        </div>

        <h5> role </h5>

        {{#if isPilot}}
        <p>This view is only seen by pilots. The pilot should focus on entering
        a flow state, knocking down issues and tasks. The testing and github
        integration panels are hidden to the pilot to aid in this regard,
        allowing them to focus on coding while the copilot performs testing and
        creates issues, writes documentation, and makes commits.</p>
        <img class='img-rounded' style='height: 150px' src='img/ace.jpg'>
        {{else}}
        <p>This view is only seen by copilots. The copilot should focus on
        testing the work that the pilot performs by using the testing panel,
        and filing any bugs found. They also are in control of the github
        integration, so they decide when it is time to make a commit.</p>
        <img class='img-rounded' style='height: 150px' src='img/goose.jpg'>
        {{/if}}

      </div>
    </div>
    {{> extras }}
  </div>
</template>



<template name='forkRepo'>
  {{#if forking}}

  <button class='list-group-item'>
    <div class='alert alert-success nomargin'>
      <div class='input-group'>
        <form class='forker'>
          <input placeholder='enter a repo to fork (eg: jeremywrnr/codepilot) ...'
          id='repoForker' class='form-control' type='text' name='title' value=''>
        </form>
        <span class='input-group-btn'>
          <button type='button' class='btn btn-default del cancelFork'>cancel</button>
        </span>
      </div>
    </div>
  </button>

  {{else}}

  <button class='list-group-item forkrepo'>
    <div class='wider grn btn btn-lg forkrepo'> fork a repo from github </div>
  </button>

  {{/if}}
</template>

<template name='newBranch'>
  {{#if branching}}

  <button class='list-group-item'>
    <div class='alert alert-success nomargin'>
      <div class='input-group'>
        <form class='brancher'>
          <input placeholder='enter the new branch name...' id='branchNamer'
          class='form-control' type='text' name='title' value=''>
        </form>
        <span class='input-group-btn'>
          <button type='button' class='btn btn-default del cancelBranch'>cancel</button>
        </span>
      </div>
    </div>
  </button>

  {{else}}

  <button class='list-group-item newBranch'>
    <div class='wider grn btn btn-lg newBranch'> make new branch from {{ currentBranch }}</div>
  </button>

  {{/if}}
</template>



<template name='user'>
  <button class='list-group-item repo'>
    <!--<span class="label label-primary pull-right">user</span>-->
    <button class='label label-primary btn btn-xs pull-right'> user </button>
    {{ login }} | {{ role }} | {{ repoBranch }}
  </button>
</template>

<template name='repo'>
  <button class='list-group-item repo'>
    <button class='label label-primary btn btn-xs pull-right'> repo </button>
    {{ repo.full_name }} </button>
</template>

<template name='branch'>
  <button class='list-group-item branch'>
    <button class='label label-primary btn btn-xs pull-right'> branch </button>
    {{ name }} </button>
</template>



<template name='extras'>
  <div class='panel panel-default'>
    <div class='panel-heading'> <h2 class='panel-title'> extras </h2> </div>
    <div class='panel-body'>

      <h5> about </h5>

      {{> about }} <!--from welcome.html-->

      <h5> disclaimer </h5>

      I do not own the Octocat or any image similar to it. I use it to link
      back to the source of this project, which is hosted on GitHub - the
      creator and owner of the Octocat. This project is maintained by
      <a href='https://github.com/jeremywrnr'>@jeremywrnr</a> - please get in
      touch with me if you have feedback on the tool, or if you find a bug feel
      free to open up an issue.

      <h5> debugging </h5>

      <div class='alert alert-danger nomargin' role='alert'>
        <button style='width:100%;' class='btn del resetfiles'>
          reset current project to basic html/css/js website</button>
      </div>

    </div>
  </div>
</template>
