<!-- code editor layout -->

<template name="code">
  {{#if nulldoc}}
  {{> loadprompt}}
  {{else}}
  {{> editor }}
  {{/if}}
</template>

<template name="editor">
    {{#with docid}}
    {{> filename this}}

    {{#if isImage }}
    {{> renderImage this}}

    {{else}}
    <div id="editor-container">
    {{> sharejsAce docid=this onRender=config onConnect=setMode id="editor"}}
    </div>

    {{/if}}
    {{/with}}
</template>

<template name="loadprompt">
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">editor</h3>
    </div>
    <div class="panel-body">
      <div class="alert alert-success alert-dismissable" role="alert">
        First time here? <a class="alert-link" href="config"> [click here to set up your account]</a>
      </div>
      <div class="alert alert-info" role="alert">
        Let"s get started - click a file to start editing code!
      </div>
      <div class="panel panel-default">
        <div class="panel-body">
          <ul class="nav nav-pills nav-stacked">
            {{> userfiles}} <!--found in file.html-->
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="filename">
  <div id="codenavbar">
    {{#if rename}}
    <form class="navbar-form pull-left rename">
      <input id="filetitle" class="form-control" type="text" name="title" value="{{title}}">
    </form>
    {{else}}
    <p class="navbar-text"> ~/{{title}} </p>
    {{/if}}

    <form class="navbar-form pull-right">
      <a href="/test"><button class="grn btn btn-default btn-small">test</button></a>
      <a href="/save"><button class="grn btn btn-default btn-small">save</button></a>
      <button class="edit btn btn-default btn-small">rename</button>
      <button class="del btn btn-default btn-small">delete</button>
    </form>
  </div>
</template>

<template name="renderImage">
  <div class="panel panel-default nomargin-image">
    <div class="panel-body">
      <a target="_blank" href="{{ html }}">
        <img class="wide" src="{{ raw }}"/>
      </a>
    </div>
  </div>
</template>

